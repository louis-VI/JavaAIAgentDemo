<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HunyuanGPT</title>
<!--cssé¡µé¢å¸ƒå±€éƒ¨åˆ†-->
    <!-- å¼•å…¥å¤–éƒ¨ CSS æ–‡ä»¶ -->
    <link rel="stylesheet" href="/css/styles.css">
    <style>
        /*!* æ•´ä¸ªé¡µé¢çš„åŸºæœ¬æ ·å¼ å¸ƒå±€æ–¹å¼ä½¿ç”¨flexbox *!*/

        /*body {*/
        /*    font-family: Arial, sans-serif;*/
        /*    background-color: #f4f4f4;*/
        /*    display: flex;*/
        /*    flex-direction: column;*/
        /*    justify-content: flex-start;*/
        /*    align-items: center;*/
        /*    height: 100vh;*/
        /*    margin: 0;*/
        /*    padding: 20px;*/
        /*}*/
        /*!* å®šä¹‰èŠå¤©å®¹å™¨çš„æ ·å¼ï¼ŒåŒ…æ‹¬å®½åº¦ã€é«˜åº¦ã€èƒŒæ™¯é¢œè‰²ã€å¸ƒå±€æ–¹å¼ï¼ˆä½¿ç”¨flexboxï¼‰ï¼Œä»¥åŠç›¸å¯¹å®šä½ã€‚ *!*/

        /*#chat-container {*/
        /*    width: 98%;*/
        /*    height: 98%;*/
        /*    background-color: #f4f4f4;*/
        /*    display: flex;*/
        /*    flex-direction: column;*/
        /*    position: relative;*/
        /*}*/
        /*!* è®¾ç½®æ¶ˆæ¯æ˜¾ç¤ºåŒºåŸŸçš„æ ·å¼ é—®ç­”éƒ½åŒ…æ‹¬ï¼ŒåŒ…æ‹¬è‡ªåŠ¨å‚ç›´æ»šåŠ¨ã€å†…è¾¹è·ã€åº•éƒ¨è¾¹æ¡†å’ŒèƒŒæ™¯é¢œè‰²ã€‚ *!*/

        /*#messages {*/
        /*    flex-grow: 1;*/
        /*    overflow-y: auto;*/
        /*    padding: 20px;*/
        /*    border-bottom: 1px solid #ddd;*/
        /*    background-color: #f4f4f4;*/
        /*}*/
        /*!* è®¾ç½®æ¯æ¡æ¶ˆæ¯çš„å¤–éƒ¨å®¹å™¨çš„æ ·å¼ï¼ŒåŒ…æ‹¬flexboxå¸ƒå±€å’Œåº•éƒ¨å¤–è¾¹è·ã€‚ *!*/

        /*.message-wrapper {*/
        /*    display: flex;*/
        /*    margin-bottom: 10px;*/
        /*}*/
        /*!* è®¾ç½®æ¯æ¡æ¶ˆæ¯çš„æ ·å¼ï¼ŒåŒ…æ‹¬æœ€å¤§å®½åº¦ã€å†…è¾¹è·ã€åœ†è§’ã€åº•éƒ¨å¤–è¾¹è·ã€ç›¸å¯¹å®šä½å’Œè‡ªåŠ¨æ¢è¡Œã€‚ *!*/

        /*.message {*/
        /*    max-width: 60%;*/
        /*    padding: 10px;*/
        /*    border-radius: 10px;*/
        /*    margin-bottom: 10px;*/
        /*    position: relative;*/
        /*    word-wrap: break-word;*/
        /*}*/
        /*!* ä¸ºç”¨æˆ·æ¶ˆæ¯è®¾ç½®ç‰¹å®šçš„æ ·å¼ï¼Œä½¿å…¶é å³å¯¹é½ï¼Œå¹¶è®¾ç½®æ¶ˆæ¯çš„èƒŒæ™¯é¢œè‰²ã€æ–‡å­—é¢œè‰²å’Œåœ†è§’æ ·å¼ã€‚ *!*/
        /*!* å¯¹åº”çš„å…ƒç´ ï¼š<div class="message-wrapper message-user"> å’Œ <div class="message"> å†…çš„ç”¨æˆ·æ¶ˆæ¯ã€‚ *!*/

        /*.message-user {*/
        /*    justify-content: flex-end;*/
        /*}*/

        /*.message-user .message {*/
        /*    background-color: #d1e7dd;*/
        /*    color: #0f5132;*/
        /*    border-radius: 10px 10px 0 10px;*/
        /*}*/

        /*.message-bot {*/
        /*    justify-content: flex-start;*/
        /*}*/

        /*.message-bot .message {*/
        /*    background-color: #cfe2ff;*/
        /*    color: #084298;*/
        /*    border-radius: 10px 10px 10px 0;*/
        /*}*/

        /*.message-code {*/
        /*    background-color: #f4f4f4;*/
        /*    color: black;*/
        /*    border: 1px solid #ddd;*/
        /*    padding: 10px;*/
        /*    border-radius: 5px;*/
        /*    white-space: pre-wrap;*/
        /*    font-family: monospace;*/
        /*}*/

        /*#input-container {*/
        /*    !*display: flex;*!*/
        /*    !*padding: 10px;*!*/
        /*    !*background-color: #fff;*!*/
        /*    !*border-top: 1px solid #ddd;*!*/

        /*    !*æ·»åŠ å±æ€§*!*/
        /*    display: flex;*/
        /*    padding: 5px;*/
        /*    background-color: #fff;*/
        /*    border-top: 1px solid #ddd;*/
        /*    width: 100%;*/
        /*    height: 62px; !* è®¾ç½®å›ºå®šé«˜åº¦ *!*/
        /*    box-sizing: border-box; !* ç¡®ä¿å†…è¾¹è·å’Œè¾¹æ¡†åŒ…æ‹¬åœ¨æ€»å®½åº¦å’Œé«˜åº¦ä¸­ *!*/
        /*    align-items: center; !* å‚ç›´å±…ä¸­å¯¹é½å­å…ƒç´  *!*/
        /*}*/

        /*#query {*/
        /*    !*flex-grow: 1;*!*/
        /*    !*padding: 10px;*!*/
        /*    !*border: 1px solid #ddd;*!*/
        /*    !*border-radius: 5px;*!*/
        /*    !*æ·»åŠ å±æ€§*!*/
        /*    flex-grow: 1;*/
        /*    padding: 10px;*/
        /*    border: 1px solid #ddd;*/
        /*    border-radius: 5px;*/
        /*    resize: none; !* ç¦æ­¢ç”¨æˆ·æ‰‹åŠ¨è°ƒæ•´å¤§å° *!*/
        /*    min-height: 32px; !* è®¾ç½®æœ€å°é«˜åº¦ *!*/
        /*    overflow-y: auto; !* å…è®¸å‚ç›´æ»šåŠ¨ *!*/
        /*    margin-right: 10px; !* ç»™æŒ‰é’®ç•™å‡ºç©ºé—´ *!*/
        /*    height: 42px; !* è®¾ç½®å›ºå®šé«˜åº¦ä¸æŒ‰é’®ä¸€è‡´ *!*/
        /*    box-sizing: border-box; !* ç¡®ä¿å†…è¾¹è·å’Œè¾¹æ¡†åŒ…æ‹¬åœ¨æ€»å®½åº¦å’Œé«˜åº¦ä¸­ *!*/
        /*}*/

        /*#send-btn {*/
        /*    !*padding: 10px 20px;*!*/
        /*    !*border: none;*!*/
        /*    !*background-color: #609966;*!*/
        /*    !*color: white;*!*/
        /*    !*cursor: pointer;*!*/
        /*    !*border-radius: 5px;*!*/
        /*    !*margin-left: 10px;*!*/

        /*    !*!*æ·»åŠ å±æ€§*!*!*/
        /*    !*padding: 0 20px; !* è°ƒæ•´å†…è¾¹è·ï¼Œä½¿å…¶ä¸è¾“å…¥æ¡†çš„é«˜åº¦ä¸€è‡´ *!*!*/
        /*    !*border: none;*!*/
        /*    !*background-color: #609966;*!*/
        /*    !*color: white;*!*/
        /*    !*cursor: pointer;*!*/
        /*    !*border-radius: 5px;*!*/
        /*    !*height: 60px; !* è®¾ç½®å›ºå®šé«˜åº¦ä¸è¾“å…¥æ¡†ä¸€è‡´ *!*!*/
        /*    !*align-self: center; !* å‚ç›´å±…ä¸­å¯¹é½ *!*!*/


        /*    !*ç¬¬äºŒæ¬¡ä¿®æ”¹*!*/
        /*    width: 42px; !* è®¾ç½®æŒ‰é’®çš„å®½åº¦ *!*/
        /*    height: 42px; !* è®¾ç½®æŒ‰é’®çš„é«˜åº¦ï¼Œä¸è¾“å…¥æ¡†ä¸€è‡´ *!*/
        /*    border: none;*/
        /*    background-color: #609966;*/
        /*    color: white;*/
        /*    cursor: pointer;*/
        /*    border-radius: 50%; !* ä½¿æŒ‰é’®å˜ä¸ºåœ†å½¢ *!*/
        /*    display: flex;*/
        /*    align-items: center; !* å‚ç›´å±…ä¸­å¯¹é½æŒ‰é’®å†…éƒ¨å†…å®¹ *!*/
        /*    justify-content: center; !* æ°´å¹³å±…ä¸­å¯¹é½æŒ‰é’®å†…éƒ¨å†…å®¹ *!*/
        /*    padding: 0; !* ç§»é™¤å†…è¾¹è· *!*/
        /*    font-size: 16px; !* è®¾ç½®å­—ä½“å¤§å° *!*/
        /*}*/

        /*#send-btn:hover {*/
        /*    background-color: #507b54;*/
        /*}*/

        /*#label {*/
        /*    position: fixed;*/
        /*    top: 36%;*/
        /*    left: 50%;*/
        /*    transform: translate(-50%, -50%);*/
        /*    z-index: 1100;*/
        /*    !* æ¯” #qrcode-container æ›´é«˜çš„ z-index *!*/
        /*}*/

        /*#qrcode-container {*/
        /*    position: fixed;*/
        /*    top: 50%;*/
        /*    left: 50%;*/
        /*    transform: translate(-50%, -50%);*/
        /*    display: flex;*/
        /*    justify-content: center;*/
        /*    align-items: center;*/
        /*    z-index: 1000;*/
        /*    background-color: gray;*/
        /*    padding: 0px;*/
        /*    border: none;*/
        /*    border-radius: 0px;*/
        /*    margin-top: 0px; !* å¢åŠ  margin-top æ¥å¢åŠ è·ç¦» æ–‡å­—äºŒç»´ç ä¹‹é—´çš„è·ç¦» *!*/
        /*    line-height: 0; !* é¿å…è¡Œé«˜é€ æˆçš„ç©ºç™½ *!*/
        /*    box-shadow: none;*/
        /*}*/

        /*#qrcode-container img {*/
        /*    max-width: 400px; !* å¢åŠ æœ€å¤§å®½åº¦ *!*/
        /*    width: 100%;      !* è®©å›¾ç‰‡å¡«æ»¡çˆ¶å®¹å™¨ *!*/
        /*    height: auto;     !* ä¿æŒå›¾ç‰‡çš„æ¯”ä¾‹ *!*/
        /*    display: block;   !* å»é™¤å›¾ç‰‡åº•éƒ¨é»˜è®¤çš„è¡Œå†…ç©ºç™½ *!*/
        /*    margin: 0;        !* å»é™¤å¤–è¾¹è· *!*/
        /*    padding: 0;       !* å»é™¤å†…è¾¹è· *!*/
        /*    border: none;     !* ç¡®ä¿æ²¡æœ‰è¾¹æ¡† *!*/
        /*    vertical-align: top;    !* å»é™¤è¡Œå†…å…ƒç´ ç©ºéš™ *!*/
        /*}*/

        /*.loading-spinner {*/
        /*    border: 4px solid #f3f3f3;*/
        /*    border-radius: 50%;*/
        /*    border-top: 4px solid #3498db;*/
        /*    width: 20px;*/
        /*    height: 20px;*/
        /*    animation: spin 1s linear infinite;*/
        /*}*/

        /*@keyframes spin {*/
        /*    0% {*/
        /*        transform: rotate(0deg);*/
        /*    }*/
        /*    100% {*/
        /*        transform: rotate(360deg);*/
        /*    }*/
        /*}*/
    </style>
</head>

<body>
<!--htmléƒ¨åˆ†-->
<div id="chat-container">
    <span id="label" style="font-weight: bold; font-style: italic;">ğŸ§æ‚¨çš„æ”¯æŒæ˜¯æœ¬ç«™çš„åŠ¨åŠ›ğŸ§</span>

    <div id="qrcode-container">
        <img src="./qrcode.jpg" alt="QR Code">
    </div>
    <div id="messages"></div>
    <div id="input-container">
        <textarea id="query" placeholder="è¯·è¾“å…¥æç¤ºè¯..."></textarea>
        <button id="send-btn">å‘é€</button>
    </div>
</div>

<!--jsè¡Œä¸ºé€»è¾‘éƒ¨åˆ†-->
<script src="/js/chat.js">
    // const messagesDiv = document.getElementById('messages');
    // const queryInput = document.getElementById('query');
    // const sendBtn = document.getElementById('send-btn');
    // const qrCodeContainer = document.getElementById('qrcode-container');
    // const label = document.getElementById('label');
    //
    // // è¯·æ±‚éƒ¨åˆ†ç«‹å³æ˜¾ç¤º
    // function appendQuery(text, className) {
    //     const messageWrapper = document.createElement('div');
    //     messageWrapper.className = `message-wrapper ${className}`;
    //
    //     const messageDiv = document.createElement('div');
    //     messageDiv.className = 'message';
    //     messageDiv.textContent = text;
    //
    //     messageWrapper.appendChild(messageDiv);
    //     messagesDiv.appendChild(messageWrapper);
    //     messagesDiv.scrollTop = messagesDiv.scrollHeight;
    // }
    //
    // // å›å¤éƒ¨åˆ†ä½¿ç”¨æ‰“å­—æœºæ•ˆæœ
    // function appendMessage(text, className) {
    //     const messageWrapper = document.createElement('div');
    //     messageWrapper.className = `message-wrapper ${className}`;
    //
    //     const messageDiv = document.createElement('div');
    //     messageDiv.className = 'message';
    //     messageWrapper.appendChild(messageDiv);
    //     messagesDiv.appendChild(messageWrapper);
    //     typeWriter(messageDiv, text);
    // }
    //
    // function appendCodeMessage(code) {
    //     const messageWrapper = document.createElement('div');
    //     messageWrapper.className = 'message-wrapper message-bot';
    //
    //     const messageDiv = document.createElement('div');
    //     messageDiv.className = 'message message-code';
    //     messageWrapper.appendChild(messageDiv);
    //     messagesDiv.appendChild(messageWrapper);
    //     typeWriter(messageDiv, code);
    // }
    //
    // function typeWriter(element, text, index = 0) {
    //     if (index < text.length) {
    //         if (text.charAt(index) === '\n') {
    //             element.appendChild(document.createElement('br'));
    //         } else {
    //             const span = document.createElement('span');
    //             span.textContent = text.charAt(index);
    //             element.appendChild(span);
    //         }
    //         setTimeout(() => typeWriter(element, text, index + 1), 16); // æ›´æ”¹æ‰“å­—é€Ÿåº¦
    //     } else {
    //         messagesDiv.scrollTop = messagesDiv.scrollHeight;
    //     }
    // }
    //
    // function sendPostRequest() {
    //     const query = queryInput.value;
    //     if (!query) return;
    //
    //     // éšè—äºŒç»´ç 
    //     qrCodeContainer.style.display = 'none';
    //     label.style.display = 'none';
    //
    //     appendQuery(query, 'message-user');
    //     queryInput.value = '';
    //
    //     // æ·»åŠ åŠ è½½åŠ¨ç”»
    //     const loadingWrapper = document.createElement('div');
    //     loadingWrapper.className = 'message-wrapper message-bot';
    //     const loadingDiv = document.createElement('div');
    //     loadingDiv.className = 'message';
    //     const spinner = document.createElement('div');
    //     spinner.className = 'loading-spinner';
    //     loadingDiv.appendChild(spinner);
    //     loadingWrapper.appendChild(loadingDiv);
    //     messagesDiv.appendChild(loadingWrapper);
    //
    //     // æ»šåŠ¨åˆ°è¾“å…¥æ¡†ä½ç½®
    //     queryInput.scrollIntoView({ behavior: 'smooth', block: 'end', inline: 'nearest' });
    //
    //     fetch('/chat', {
    //         method: 'POST',
    //         headers: {
    //             'Content-Type': 'application/json',
    //         },
    //         body: JSON.stringify({ query }),
    //     })
    //         .then(response => response.text())
    //         .then(data => {
    //             console.log('Success:', data);
    //             try {
    //                 const jsonData = JSON.parse(data);
    //                 if (typeof jsonData === 'object' && jsonData !== null) {
    //                     appendCodeMessage(JSON.stringify(jsonData, null, 2));
    //                 } else {
    //                     appendMessage(data, 'message-bot');
    //                 }
    //             } catch (error) {
    //                 appendMessage(data, 'message-bot');
    //             } finally {
    //                 // ç§»é™¤åŠ è½½åŠ¨ç”»
    //                 loadingWrapper.remove();
    //                 // æ»šåŠ¨åˆ°è¾“å…¥æ¡†ä½ç½®
    //                 queryInput.scrollIntoView({ behavior: 'smooth', block: 'end', inline: 'nearest' });
    //             }
    //         })
    //         .catch((error) => {
    //             console.error('Error:', error);
    //             appendMessage('Error: ' + error.message, 'message-bot');
    //             // ç§»é™¤åŠ è½½åŠ¨ç”»
    //             loadingWrapper.remove();
    //             // æ»šåŠ¨åˆ°è¾“å…¥æ¡†ä½ç½®
    //             queryInput.scrollIntoView({ behavior: 'smooth', block: 'end', inline: 'nearest' });
    //         });
    // }
    // sendBtn.addEventListener('click', sendPostRequest);
    //
    // queryInput.addEventListener('keypress', function(event) {
    //     if (event.key === 'Enter') {
    //         if (event.shiftKey) {
    //             // æŒ‰ä¸‹ Shift + Enter æ’å…¥æ¢è¡Œç¬¦
    //             event.preventDefault();
    //             const cursorPos = queryInput.selectionStart;
    //             const textBeforeCursor = queryInput.value.substring(0, cursorPos);
    //             const textAfterCursor = queryInput.value.substring(cursorPos);
    //             queryInput.value = textBeforeCursor + '\n' + textAfterCursor;
    //             queryInput.selectionStart = queryInput.selectionEnd = cursorPos + 1;
    //
    //             // æ»šåŠ¨åˆ°è¾“å…¥æ¡†ä½ç½®
    //             queryInput.scrollIntoView({ behavior: 'smooth', block: 'end', inline: 'nearest' });
    //         } else {
    //             // æŒ‰ä¸‹ Enter å‘é€æ¶ˆæ¯
    //             event.preventDefault();
    //             sendPostRequest();
    //
    //             // æ»šåŠ¨åˆ°è¾“å…¥æ¡†ä½ç½®
    //             queryInput.scrollIntoView({ behavior: 'smooth', block: 'end', inline: 'nearest' });
    //         }
    //     }
    // });
    //
    // // åœ¨ç‚¹å‡»è¾“å…¥æ¡†æ—¶éšè—äºŒç»´ç å’Œæ ‡ç­¾
    // queryInput.addEventListener('focus', function() {
    //     qrCodeContainer.style.display = 'none';
    //     label.style.display = 'none';
    // });



</script>

</body>

</html>
